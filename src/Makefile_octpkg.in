targets = oct playrec

CC=@CC@
CXX=@CXX@

export CC
export CXX

ifeq (@have_libportaudio@,1)
  export HAVE_PORTAUDIO=1
endif

all: $(targets)

oct:
	$(MAKE) -f Makefile_unix
	$(MAKE) -C ../oct -f Makefile_unix
	mv ../oct/*.oct .
	mv ../oct/*.mex .
	ls -1 *.oct | cut -d . -f 1 | xargs -I {} rm -f ../inst/comp/{}.m
	ls -1 *.mex | cut -d . -f 1 | xargs -I {} rm -f ../inst/comp/{}.m
	rm -f ../inst/ltfatarghelper.m

playrec:
	$(MAKE) -C ../thirdparty/Playrec -f Makefile_unixoct
	mv ../thirdparty/Playrec/playrec.mex .
